<div class="text-center">
  <h2>Todo一覧</h2>
</div>

<table class="table table-hover" id="todos-table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Title</th>
      <th scope="col">Deadline</th>
      <th scope="col">Completed</th>
      <th scope="col">UpdatedAt</th>
      <th scope="col">全<%= itemNum %>件</th>
    </tr>
  </thead>
  <tbody>
    <% todos.forEach(todo => { %>
      <% const completedParams = todo.completed ? ['完了', 'DELETE', '完了取消'] : ['未完了', 'PUT', '完了'] %>
      <tr>
        <th> <%= todos.indexOf(todo) + 1 %> </th>
        <td> <%= todo.title %> </td>
        <td> <%= todo.deadline %> </td>
        <td> <%= completedParams[0] %> </td>
        <td> <%= todo.updatedAt %></td>
        <td>
          <a class="btn btn-primary btn-sm" href="/todos/<%= todo.id %>">詳細</a>
          <button class="btn btn-outline-primary btn-sm" onclick="location.href='/todos/<%= todo.id %>/completed?_method=<%= completedParams[1] %>'"><%= completedParams[2] %></button> 
          <button class="btn btn-outline-danger btn-sm" onclick="location.href='/todos/<%= todo.id %>?_method=DELETE'">削除</button>
          <button class="btn btn-outline-warning btn-sm" onclick="location.href='/todos/<%= todo.id %>/edit'">編集</button>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>
<hr>
<button class="btn btn-primary" onclick="location.href='/todos?completed=true'">完了一覧</button>
<button class="btn btn-primary" onclick="location.href='/todos?completed=false'">未完了一覧</button>
<button class="btn btn-primary" onclick="location.href='/todos'">全件</button>

